<div class="day-entry" [class.invalid]="!isValid()">
  <div class="entry-field">
    <input 
      type="date" 
      [value]="getFormattedDate()"
      (change)="onFieldChange('date', $event)"
      class="form-control">
  </div>
  
  <div class="entry-field">
    <select 
      [value]="day.code"
      (change)="onFieldChange('code', $event, true)"
      [class.invalid]="!isCodeValid"
      class="form-control"
      required>
      <option value="" disabled selected>Seleziona codice *</option>
      @for (activity of activityCodes; track activity.code) {
        <option [value]="activity.code">{{ activity.code }} - {{ activity.description }}</option>
      }
    </select>
    @if (!isCodeValid) {
      <div class="error-message">Codice attività obbligatorio</div>
    }
  </div>
  
  <div class="entry-field">
    <input 
      type="text" 
      [value]="day.activity"
      (change)="onFieldChange('activity', $event)"
      placeholder="Descrizione attività"
      class="form-control">
  </div>
  
  @if (shouldShowExtract()) {
    <div class="entry-field">
      <select 
        [value]="day.extract || ''"
        (change)="onFieldChange('extract', $event)"
        class="form-control">
        <option value="">-- Seleziona Estratto --</option>
        @for (extract of extracts; track extract.id) {
          <option [value]="extract.id">{{ extract.id }} - {{ extract.client }}</option>
        }
      </select>
    </div>
  }
  
  <div class="entry-field">
    <input 
      type="text" 
      [value]="day.client || ''"
      (change)="onFieldChange('client', $event)"
      placeholder="Cliente"
      class="form-control">
  </div>
  
  <div class="entry-field">
    <input 
      type="number" 
      [value]="day.hours"
      (change)="onFieldChange('hours', $event, true)"
      [class.invalid]="!isHoursValid"
      min="0.125"
      max="8"
      step="0.125"
      placeholder="0.00"
      class="form-control hours-input"
      required>
    @if (!isHoursValid) {
      <div class="error-message">Ore obbligatorie (0.125 - 8)</div>
    }
  </div>
  
  <div class="entry-field">
    <input 
      type="text" 
      [value]="day.notes || ''"
      (change)="onFieldChange('notes', $event)"
      placeholder="Note"
      class="form-control">
  </div>
  
  <div class="entry-field actions">
    <button (click)="onRemove()" class="btn btn-danger btn-sm">
      ×
    </button>
  </div>
</div>