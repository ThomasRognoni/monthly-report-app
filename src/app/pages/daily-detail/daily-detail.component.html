<div class="page-container">
  <h2>Dettaglio Giornaliero</h2>
  <p>Qui puoi visualizzare e modificare le singole voci giornaliere.</p>

  <div *ngIf="days.length === 0">
    <p>Nessun giorno per il mese selezionato.</p>
    <button class="btn btn-primary" (click)="addDay()">Aggiungi Giorno</button>
  </div>

  <div *ngIf="days.length > 0">
    <div class="days-list">
      <div
        *ngFor="let d of days; let i = index; trackBy: trackByDay"
        class="day-row"
      >
        <div class="day-left">
          <div class="date-pill">{{ d.date | date: "dd/MM/yyyy" }}</div>
          <div class="code-label">{{ d.code }}</div>
        </div>

        <div class="day-center">
          <input
            type="number"
            min="0"
            max="24"
            class="hours-input"
            [(ngModel)]="d.hours"
            (ngModelChange)="updateDay(i, 'hours', $event)"
            aria-label="Ore"
          />

          <select
            class="extract-select"
            [(ngModel)]="d.extract"
            (ngModelChange)="updateDay(i, 'extract', $event)"
          >
            <option value="">-- Nessun estratto --</option>
            <option
              *ngFor="let ex of extracts; trackBy: trackByExtract"
              [value]="ex.id"
            >
              {{ ex.code }} - {{ ex.id }}
            </option>
          </select>
          <span class="client-quick">{{ getClientForExtract(d.extract) }}</span>

          <input
            type="text"
            class="notes-input"
            placeholder="Note"
            [(ngModel)]="d.notes"
            (ngModelChange)="updateDay(i, 'notes', $event)"
            aria-label="Note"
          />
        </div>

        <div class="day-right">
          <button class="btn btn-ghost small" (click)="editDay(i)">
            Dettagli
          </button>
          <button class="btn btn-danger small" (click)="removeDay(i)">âœ•</button>
        </div>
      </div>
    </div>

    <div class="actions-row">
      <button class="btn btn-primary" (click)="addDay()">
        Aggiungi Giorno
      </button>
    </div>
  </div>
</div>
