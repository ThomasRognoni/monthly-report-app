<div class="report-summary">
  <div class="summary-header">
    <div class="header-content">
      <div class="header-main">
        <h1 class="main-title">
          ESTRATTO PERSONALE RIASSUNTIVO DELLE ATTIVITA'
        </h1>
        <h2 class="month-title">
          MESE DI {{ formattedMonthYear | uppercase }}
        </h2>
        <h3 class="employee-name">
          {{ employeeName }}
        </h3>
      </div>
      <div class="header-stats">
        <div class="stat-item">
          <span class="stat-label">Giorni Lavorativi</span>
          <span class="stat-value">{{ totalWorkDays }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Giorni Dichiarati</span>
          <span class="stat-value">{{ formatNumber(totalDeclaredDays) }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="quadrature-section">
    <h3 class="section-title">
      QUADRATURA DEL MESE
    </h3>
    
    <div class="quadrature-grid">
      <div class="metric-card feature-card">
        <div class="card-content">
          <div class="metric-header">
            <span class="metric-label">Giorni Lavorativi</span>
          </div>
          <div class="metric-value">{{ totalWorkDays }}</div>
        </div>
      </div>

      <div class="metric-card feature-card">
        <div class="card-content">
          <div class="metric-header">
            <span class="metric-label">Giorni Dichiarati</span>
          </div>
          <div class="metric-value">{{ formatNumber(totalDeclaredDays) }}</div>
        </div>
      </div>

      <div class="metric-card feature-card quadrature-status" [class]="quadratureStatus">
        <div class="card-content">
          <div class="metric-header">
            <span class="metric-label">Quadratura</span>
          </div>
          <div class="metric-value">{{ formatNumber(quadrature) }}</div>
        </div>
      </div>

      <div class="metric-card feature-card">
        <div class="card-content">
          <div class="metric-header">
            <span class="metric-label">Straordinari</span>
          </div>
          <div class="metric-value">{{ formatNumber(overtime) }}</div>
        </div>
      </div>
    </div>
  </div>

  <div class="activity-section">
    <h3 class="section-title">
      RIEPILOGO ATTIVITÃ€
    </h3>
    
    <div class="activity-grid">
      @for (activityCode of sortedActivityCodes; track activityCode) {
        <div class="activity-card feature-card">
          <div class="activity-content">
            <div class="activity-info">
              <span class="activity-code">{{ activityCode }}</span>
              <span class="activity-description">{{ getActivityDescription(activityCode) }}</span>
            </div>
            <div class="activity-total">
              {{ formatNumber(activityDays[activityCode] || 0) }} giorni
            </div>
          </div>
          @if ((activityDays[activityCode] || 0) > 0) {
  <div class="activity-progress">
    <div class="progress-bar">
      <div 
        class="progress-fill"
        [style.width.%]="getPercentage(activityDays[activityCode] || 0, totalDeclaredDays)">
      </div>
    </div>
    <span class="progress-text">
      {{ getPercentage(activityDays[activityCode] || 0, totalDeclaredDays) | number:'1.0-0' }}%
    </span>
  </div>
}
        </div>
      }
      
      <div class="activity-card feature-card total-card">
        <div class="activity-content">
          <div class="activity-info">
            <span class="activity-code total-code">TT</span>
            <span class="activity-description total-description">TOTALE GIORNI DICHIARATI</span>
          </div>
          <div class="activity-total total-value">
            {{ formatNumber(totalDeclaredDays) }}
          </div>
        </div>
        @if (totalDeclaredDays > 0) {
          <div class="activity-progress">
            <div class="progress-bar">
              <div 
                class="progress-fill total-progress"
                [style.width.%]="100">
              </div>
            </div>
            <span class="progress-text">100%</span>
          </div>
        }
      </div>
    </div>
  </div>